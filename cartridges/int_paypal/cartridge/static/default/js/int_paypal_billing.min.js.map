{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./cartridges/int_paypal/cartridge/client/default/js/api.js","webpack:///./cartridges/int_paypal/cartridge/client/default/js/billing/billing.js","webpack:///./cartridges/int_paypal/cartridge/client/default/js/billing/billingHelper.js","webpack:///./cartridges/int_paypal/cartridge/client/default/js/billing/guest/initBillingButton.js","webpack:///./cartridges/int_paypal/cartridge/client/default/js/billing/registered/billingAgreementHelper.js","webpack:///./cartridges/int_paypal/cartridge/client/default/js/billing/registered/initBillingAgreementButton.js","webpack:///./cartridges/int_paypal/cartridge/client/default/js/helper.js","webpack:///./cartridges/int_paypal/cartridge/client/default/js/loader.js"],"names":["loaderInstance","require","$loaderContainer","document","querySelector","loader","showCartErrorHtml","message","$","addClass","append","window","scrollTo","showCheckoutErrorHtml","textContent","style","display","updateOrderData","show","ajax","url","paypalUrls","type","success","hide","location","href","placeOrderStage","error","err","JSON","parse","responseText","errorMsg","transactionExpired","reload","getPurchaseUnits","get","getPurchaseUnit","then","purchase_units","getBillingAgreementToken","isCartFlow","createBillingAgreementToken","data","createBillingAgreementCall","billingToken","createBillingAgreement","contentType","stringify","getOrderDetailsCall","orderId","getOrderDetails","createCartBillingFormData","fieldsData","$paypalButton","cartBillingFormData","FormData","cartBillingFields","getAttribute","Object","entries","forEach","entry","key","field","name","value","returnFromCart","processData","finishLpmOrder","details","lpmName","paypalMethodId","sdkLoaded","$restPaypalAccountsList","isRegisteredUser","$billingButtonContainer","isBAEnabled","paypal","initPaypalButton","isNewAccountSelected","initPaypalBAButton","ppPaymentOptionID","parentElement","activeTab","click","setAttribute","togglePaypalBtnVisibility","toggleBABtnVisibility","assignEmailForSavedBA","on","handleTabChange","onchange","e","$accountList","target","injectBillingSDK","updateSessionAccountEmail","updateClientSide","querySelectorAll","checkbox","addEventListener","handleCheckboxChange","$paypalAccountsDropdown","$continueButton","showContinueButton","hideContinueButton","showPaypalBtn","hidePaypalBtn","showPaypalBlock","hidePaypalBlock","head","getElementsByTagName","item","script","createElement","onload","src","billingSdkUrl","partnerAttributionId","appendChild","isPaypalContentSelected","hash","_","paypalPayerEmail","order","$sessionPaypalAccount","innerText","selected","customer","selectedPaymentInstruments","billing","payment","paypalPaymentMethod","giftCertTabLink","length","paymentInstr","paymentMethod","clearSessionOption","$defaultBA","find","isLpmUsed","$usedPaymentMethod","disableFunds","indexOf","regExpPhone","RegExp","regExpEmail","notEmptyString","filterValidFormElement","str","test","parseBillingFields","acc","split","inputValue","decodeURIComponent","validInput","createBillingAddress","serialize","filter","reduce","createPayerObject","billingAddress","country","phone","given_name","firstName","surname","lastName","email_address","email","phone_number","national_number","address","address_line_1","address1","address_line_2","address2","admin_area_2","city","admin_area_1","stateCode","postal_code","postalCode","country_code","onClick","actions","$contactInfoEmail","errDiv","errStr","trim","reject","fundingSource","createOrder","parsedPurchaseUnit","amount","payer","payerObj","application_context","shipping_preference","create","onApprove","capture","redirectUrl","catch","$orderId","$selectedAccount","orderID","orderData","fail","onCancel","onError","Buttons","getPaypalButtonStyle","render","$billingBAbutton","$paypalAccountSave","$paypalAccountMakeDefault","setBAFormValues","baID","baEmail","getElementById","showPaypalBABtn","hidePaypalBABtn","saveCheckboxState","$paypal_makeDefault","$paypal_saveAccount","checked","isSessionAccountAppended","hasDefaultPaymentMethod","disabled","toggleCustomCheckbox","$paypalAccountMakeDefaultContainer","$paypalAccountSaveContainer","hasPPSavedAccount","isBALimitReached","dataset","default","isDataSetDefault","$paypalActiveAccount","$contractInfoeEmail","baId","$option","text","updateSessionOption","regExprEmail","token","id","payerInfo","payer_info","billing_address","billingAddressFields","contactInfoFields","slice","call","keysValues","phoneNumber","billingFirstName","first_name","billingLastName","last_name","billingAddressOne","line1","billingCountry","billingState","state","billingAddressCity","billingZipCode","$billinAddressBlock","concat","el","sameAttribute","options","defaultStyle","color","shape","layout","label","tagline","button","config","buttonConfigs","module","exports","containerElement","Constructor","containerEl","prototype"],"mappings":"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","file":"int_paypal_billing.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./cartridges/int_paypal/cartridge/client/default/js/billing/billing.js\");\n","var loaderInstance = require('./loader');\nvar $loaderContainer = document.querySelector('.paypalLoader');\nvar loader = loaderInstance($loaderContainer);\n/**\n *  Appends error message on cart page\n *\n * @param {string} message error message\n */\nfunction showCartErrorHtml(message) {\n    $('.checkout-btn').addClass('disabled');\n    $('.cart-error').append(\n        `<div class=\"alert alert-danger alert-dismissible valid-cart-error fade show cartError\" role=\"alert\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                <span aria-hidden=\"true\">&times;</span>\n            </button>\n            ${message}\n        </div>`\n    );\n    window.scrollTo(0, 0);\n}\n\n/**\n *  Appends error message on billing checkout page\n *\n * @param {string} message error message\n */\nfunction showCheckoutErrorHtml(message) {\n    document.querySelector('.error-message-text').textContent = '';\n    document.querySelector('.error-message').style.display = 'block';\n    document.querySelector('.error-message-text').append(message);\n    window.scrollTo(0, 0);\n}\n\n/**\n * Updates information about an order\n *\n * @returns {Object} Call handling result\n */\nfunction updateOrderData() {\n    loader.show();\n    return $.ajax({\n        url: window.paypalUrls.updateOrderData + '?isCartFlow=true',\n        type: 'PATCH',\n        success: () => {\n            loader.hide();\n            window.location.href = window.paypalUrls.placeOrderStage;\n        },\n        error: (err) => {\n            loader.hide();\n            var error = JSON.parse(err.responseText);\n            showCartErrorHtml(error.errorMsg);\n            if (error.transactionExpired) {\n                location.reload();\n            }\n        }\n    });\n}\n\n/**\n * Gets purchase units\n *\n * @returns {Object} with purchase units data\n */\nfunction getPurchaseUnits() {\n    return $.get(window.paypalUrls.getPurchaseUnit)\n        .then(({ purchase_units }) => purchase_units);\n}\n\n/**\n * Gets Billing Agreement Token\n *\n * @param {boolean} isCartFlow - billing agreement flow from cart\n * @returns {string} billingToken - returns a JSON response that includes token, an approval URL\n */\nfunction getBillingAgreementToken(isCartFlow = false) {\n    return $.get(window.paypalUrls.createBillingAgreementToken + `?isCartFlow=${isCartFlow}`)\n        .then((data) => data);\n}\n\n/**\n * Gets Billing Agreement\n * After buyer approval, you use a billing agreement token to create the agreement.\n *\n * @param {string} billingToken - billing agreement token\n * @returns {Object} JSON response body that includes the billing agreement ID,\n * the state of the agreement, which is ACTIVE, and information about the payer\n */\nfunction createBillingAgreementCall(billingToken) {\n    return $.ajax({\n        url: window.paypalUrls.createBillingAgreement,\n        type: 'POST',\n        contentType: 'application/json',\n        data: JSON.stringify({ billingToken })\n    });\n}\n\n/**\n * Gets Order Details\n *\n * @param {string} orderId - billing agreement token\n * @returns {Object} JSON response body that includes payer email\n */\nfunction getOrderDetailsCall(orderId) {\n    return $.get(window.paypalUrls.getOrderDetails + `?orderId=${orderId}`)\n        .then((data) => data);\n}\n\n/**\n * Create billing formData from fields data\n *\n * @param {Object} fieldsData - fields data values\n * @param {Elemtn} $paypalButton - paypal button selector\n * @returns {Object} cart billing form data\n */\nfunction createCartBillingFormData(fieldsData, $paypalButton) {\n    var cartBillingFormData = new FormData();\n    if (!$paypalButton) {\n        $paypalButton = document.querySelector('#paypal_pdp_image') || document.querySelector('#paypal_image');\n    }\n    var cartBillingFields = $paypalButton && JSON.parse($paypalButton.getAttribute('data-paypal-billing-form-fields'));\n\n    Object.entries(cartBillingFields).forEach(entry => {\n        const [key, field] = entry;\n        if (typeof field === 'object') {\n            cartBillingFormData.append(field.name, fieldsData && fieldsData[key] ? fieldsData[key] : field.value);\n        }\n    });\n\n    return cartBillingFormData;\n}\n\n/**\n * Calls to returnFromCart endpoint, redirects to place order stage or shows error if it exists\n *\n * @returns {Object} Call handling result\n */\nfunction returnFromCart() {\n    loader.show();\n    let cartBillingFormData = createCartBillingFormData();\n\n    return $.ajax({\n        url: window.paypalUrls.returnFromCart,\n        type: 'POST',\n        contentType: false,\n        data: cartBillingFormData,\n        processData: false,\n        success: () => {\n            loader.hide();\n            window.location.href = window.paypalUrls.placeOrderStage;\n        },\n        error: function (err) {\n            loader.hide();\n            showCartErrorHtml(err.responseText);\n        }\n    });\n}\n\n/**\n * Call finishLpmOrder endpoint\n * @param  {Object} details billing address details\n * @returns {Promise} ajax call\n */\nfunction finishLpmOrder(details) {\n    const lpmName = document.querySelector('#usedPaymentMethod').value;\n    const paypalMethodId = document.querySelector('#paypalMethodId').value;\n    return $.ajax({\n        url: window.paypalUrls.finishLpmOrder,\n        type: 'POST',\n        contentType: 'application/json',\n        data: JSON.stringify({\n            details,\n            lpmName,\n            paypalMethodId\n        })\n    });\n}\n\nexport {\n    updateOrderData,\n    getPurchaseUnits,\n    getBillingAgreementToken,\n    createBillingAgreementCall,\n    getOrderDetailsCall,\n    returnFromCart,\n    showCartErrorHtml,\n    showCheckoutErrorHtml,\n    finishLpmOrder,\n    createCartBillingFormData\n};\n","import initPaypalButton from './guest/initBillingButton';\nimport initPaypalBAButton from './registered/initBillingAgreementButton';\n\nimport {\n    injectBillingSDK,\n    handleTabChange,\n    togglePaypalBtnVisibility,\n    updateSessionAccountEmail,\n    isNewAccountSelected,\n    updateClientSide\n} from './billingHelper';\n\nimport {\n    toggleBABtnVisibility,\n    assignEmailForSavedBA,\n    handleCheckboxChange\n} from './registered/billingAgreementHelper';\n\nlet sdkLoaded = false;\nlet $restPaypalAccountsList = document.querySelector('#restPaypalAccountsList');\nlet isRegisteredUser = document.querySelector('.data-checkout-stage').getAttribute('data-customer-type') === 'registered';\nlet $billingButtonContainer = document.querySelector('#billing-paypal-button-container');\nlet isBAEnabled = $billingButtonContainer && JSON.parse($billingButtonContainer.getAttribute('data-is-ba-enabled'));\nconst paypalUrls = document.querySelector('.js_paypal-content').getAttribute('data-paypal-urls');\nwindow.paypalUrls = JSON.parse(paypalUrls);\n\nif (window.paypal && !isBAEnabled) {\n    sdkLoaded = true;\n    initPaypalButton();\n} else {\n    if (window.paypal && isNewAccountSelected($restPaypalAccountsList) && isBAEnabled) {\n        initPaypalBAButton();\n        sdkLoaded = true;\n    }\n\n    let ppPaymentOptionID = document.querySelector('.nav-link.paypal-tab').parentElement.getAttribute('data-method-id');\n    let activeTab = document.querySelector('.payment-information');\n    document.querySelector('.nav-item .paypal-tab').click();\n    if (ppPaymentOptionID !== activeTab.getAttribute('data-payment-method-id')) {\n        activeTab.setAttribute('data-payment-method-id', ppPaymentOptionID);\n        $('.payment-information').data('payment-method-id', ppPaymentOptionID); // MFRA jquery hack\n    }\n\n    if (!isBAEnabled) {\n        togglePaypalBtnVisibility($restPaypalAccountsList);\n    } else {\n        toggleBABtnVisibility($restPaypalAccountsList);\n        assignEmailForSavedBA();\n    }\n}\n\n$('.payment-options[role=tablist] a[data-toggle=\"tab\"]').on('shown.bs.tab', handleTabChange);\n\nif ($restPaypalAccountsList) {\n    $restPaypalAccountsList.onchange = function (e) {\n        const $accountList = e ? e.target : $restPaypalAccountsList;\n        if (!sdkLoaded && isNewAccountSelected($restPaypalAccountsList)) {\n            injectBillingSDK();\n            sdkLoaded = true;\n        }\n\n        if (!isBAEnabled) {\n            togglePaypalBtnVisibility($accountList);\n        } else {\n            toggleBABtnVisibility($accountList);\n            assignEmailForSavedBA();\n        }\n    };\n}\n\nif (!isRegisteredUser || !isBAEnabled) {\n    $('body').on('checkout:updateCheckoutView', updateSessionAccountEmail);\n}\n\n$('body').on('checkout:updateCheckoutView', updateClientSide);\n\nif (document.querySelector('.paypal-checkbox-container')) {\n    document.querySelectorAll('.paypal-checkbox-container .custom-checkbox').forEach(checkbox => checkbox.addEventListener('change', handleCheckboxChange));\n}\n","import initPaypalButton from './guest/initBillingButton';\nimport initPaypalBAButton from './registered/initBillingAgreementButton';\nimport {\n    assignEmailForSavedBA,\n    handleCheckboxChange,\n    toggleBABtnVisibility,\n    clearSessionOption\n} from './registered/billingAgreementHelper';\n\nlet $paypalButton = document.querySelector('.js_paypal_button_on_billing_form');\nlet $paypalAccountsDropdown = document.querySelector('#paypalAccountsDropdown');\nconst $continueButton = document.querySelector('button[value=submit-payment]');\nlet isRegisteredUser = document.querySelector('.data-checkout-stage') && document.querySelector('.data-checkout-stage').getAttribute('data-customer-type') === 'registered';\nlet $restPaypalAccountsList = document.querySelector('#restPaypalAccountsList');\nlet $billingButtonContainer = document.querySelector('#billing-paypal-button-container');\nlet isBAEnabled = $billingButtonContainer && JSON.parse($billingButtonContainer.getAttribute('data-is-ba-enabled'));\n\n/**\n * Shows continue button if it's not visible\n */\nfunction showContinueButton() {\n    if ($continueButton.style.display !== '') {\n        $continueButton.style.display = '';\n    }\n}\n\n/**\n * Hides continue button if it's not hidden\n */\nfunction hideContinueButton() {\n    if ($continueButton.style.display !== 'none') {\n        $continueButton.style.display = 'none';\n    }\n}\n\n/**\n * Shows PayPal div container if it's not visible and hides continue button\n*/\nfunction showPaypalBtn() {\n    if (!$paypalButton) {\n        $paypalButton = document.querySelector('.js_paypal_button_on_billing_form');\n    }\n    if ($paypalButton.style.display !== 'block') {\n        $paypalButton.style.display = 'block';\n    }\n    hideContinueButton();\n}\n\n/**\n * Hides PayPal div container if it's not hidden and shows continue button\n*/\nfunction hidePaypalBtn() {\n    if (!$paypalButton) {\n        $paypalButton = document.querySelector('.js_paypal_button_on_billing_form');\n    }\n    if ($paypalButton.style.display !== 'none') {\n        $paypalButton.style.display = 'none';\n    }\n    showContinueButton();\n}\n\n/**\n * Shows PayPal block with accounts dropdown if it's not visible\n*/\nfunction showPaypalBlock() {\n    if (!$paypalAccountsDropdown) {\n        $paypalAccountsDropdown = document.querySelector('#paypalAccountsDropdown');\n    }\n    if ($paypalAccountsDropdown.style.display !== 'block') {\n        $paypalAccountsDropdown.style.display = 'block';\n    }\n}\n\n/**\n * Hides PayPal block with accounts dropdown if it's visible\n*/\nfunction hidePaypalBlock() {\n    if (!$paypalAccountsDropdown) {\n        $paypalAccountsDropdown = document.querySelector('#paypalAccountsDropdown');\n    }\n    if ($paypalAccountsDropdown.style.display !== 'none') {\n        $paypalAccountsDropdown.style.display = 'none';\n    }\n}\n\n/**\n * Injects SDK into billing page\n*/\nfunction injectBillingSDK() {\n    var head = document.getElementsByTagName('head').item(0);\n    var script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.onload = function () {\n        isBAEnabled ?\n            initPaypalBAButton() :\n            initPaypalButton();\n    };\n    script.src = window.paypalUrls.billingSdkUrl;\n    script.setAttribute('data-partner-attribution-id', window.paypalUrls.partnerAttributionId);\n    head.appendChild(script);\n}\n\n/**\n * Shows is new account selected\n * @param {Element} $accountList - $accountList element\n * @returns {boolean} value whether new account selected\n*/\nfunction isNewAccountSelected($accountList) {\n    return $accountList\n        .querySelector('option:checked')\n        .value === 'newaccount';\n}\n\n/**\n * Changes PayPal button visibility depending on checked option of element\n * @param {Element} $accountList - $accountList element\n*/\nfunction togglePaypalBtnVisibility($accountList) {\n    isNewAccountSelected($accountList) ?\n        showPaypalBtn() :\n        hidePaypalBtn();\n}\n\n/**\n * Handles tabs changing\n * @param {event} e - event\n*/\nfunction handleTabChange(e) {\n    const isPaypalContentSelected = e.target.hash === '#paypal-content';\n    if (!isPaypalContentSelected) {\n        showContinueButton();\n        return;\n    }\n    isNewAccountSelected($restPaypalAccountsList) ?\n        hideContinueButton() :\n        showContinueButton();\n    if (isRegisteredUser && isBAEnabled) {\n        assignEmailForSavedBA();\n        handleCheckboxChange();\n    }\n}\n\n/**\n * Updates session account email if it is differ from existed or email doesn't exist (for guest or disabled billing agreement)\n * @param {Object} _ - arg\n *\n*/\nfunction updateSessionAccountEmail(_, { order: { paypalPayerEmail } }) {\n    if (!paypalPayerEmail) return;\n    showPaypalBlock();\n    const $sessionPaypalAccount = document.querySelector('#sessionPaypalAccount');\n    if ($sessionPaypalAccount && $sessionPaypalAccount.value !== paypalPayerEmail) {\n        $sessionPaypalAccount.value = paypalPayerEmail;\n        $sessionPaypalAccount.innerText = paypalPayerEmail;\n        $sessionPaypalAccount.selected = true;\n        $restPaypalAccountsList.onchange();\n    }\n}\n\n/**\n * Updates paypal content to initial state on client side if payment method was changed from paypal to different one\n * @param {Object} _ - arg\n * @param {Object} customer - customer data object\n*/\nfunction updateClientSide(_, customer) {\n    var selectedPaymentInstruments = customer.order.billing.payment.selectedPaymentInstruments;\n    var paypalPaymentMethod = document.querySelector('.nav-link.paypal-tab').parentElement.getAttribute('data-method-id');\n    var giftCertTabLink = document.querySelector('.nav-link.gift-cert-tab');\n    var $sessionPaypalAccount = $restPaypalAccountsList.querySelector('option[id=sessionPaypalAccount]');\n\n    if (selectedPaymentInstruments.length > 0 && ($sessionPaypalAccount && $sessionPaypalAccount.value !== '')) {\n        selectedPaymentInstruments.forEach(paymentInstr => {\n            if (paymentInstr.paymentMethod !== paypalPaymentMethod) {\n                if (!isBAEnabled) {\n                    $sessionPaypalAccount.value = '';\n                    $restPaypalAccountsList.querySelector('option:checked').value = 'newaccount';\n                    hidePaypalBlock();\n                    togglePaypalBtnVisibility($restPaypalAccountsList);\n                } else if (isBAEnabled && $sessionPaypalAccount) {\n                    clearSessionOption();\n                    var $defaultBA = $restPaypalAccountsList.querySelector('option[data-default=true]');\n                    $defaultBA ? $defaultBA.selected = true : hidePaypalBlock();\n                    toggleBABtnVisibility();\n                }\n                injectBillingSDK();\n            }\n        });\n    } else if (selectedPaymentInstruments.length > 0 && giftCertTabLink) {\n        if (selectedPaymentInstruments.find(paymentInstr => paymentInstr.paymentMethod === giftCertTabLink.parentElement.getAttribute('data-method-id'))) {\n            giftCertTabLink.click();\n        }\n    }\n}\n\n/**\n * Returns value whether LPM was used or not\n * @param {Element} $usedPaymentMethod - $usedPaymentMethod element\n * @returns {boolean} value whether LPM was used\n*/\nfunction isLpmUsed($usedPaymentMethod) {\n    const disableFunds = [\n        'sepa',\n        'bancontact',\n        'eps',\n        'giropay',\n        'ideal',\n        'mybank',\n        'p24',\n        'sofort'\n    ];\n    if (disableFunds.indexOf($usedPaymentMethod.value) !== -1) {\n        return true;\n    }\n    return false;\n}\n\nexport {\n    injectBillingSDK,\n    showPaypalBlock,\n    showPaypalBtn,\n    hidePaypalBtn,\n    hideContinueButton,\n    handleTabChange,\n    togglePaypalBtnVisibility,\n    updateSessionAccountEmail,\n    isNewAccountSelected,\n    updateClientSide,\n    showContinueButton,\n    isLpmUsed\n};\n","/* eslint-disable no-useless-escape */\n/* eslint-disable no-control-regex */\nimport { getPurchaseUnits, showCheckoutErrorHtml, finishLpmOrder, getOrderDetailsCall } from '../../api';\nimport { isLpmUsed } from '../billingHelper';\nimport { getPaypalButtonStyle } from '../../helper';\n\nconst loaderInstance = require('../../loader');\nlet $loaderContainer = document.querySelector('.paypalLoader');\nlet loader = loaderInstance($loaderContainer);\nlet $usedPaymentMethod = document.querySelector('#usedPaymentMethod');\nconst regExpPhone = new RegExp(/^[0-9]{1,14}?$/);\nconst regExpEmail = new RegExp(/(?:[a-zA-Z0-9!#$%&'*+\\/=?^_`{|}~-]+(?:\\.[a-zA-Z0-9!#$%&'*+\\/=?^_`{|}~-]+)*|(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-zA-Z0-9-]*[a-zA-Z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/);\nconst notEmptyString = new RegExp(/=(?!\\s*$).+/);\n\n/**\n *  Filters valid form elements\n *\n * @param {string} str - arg\n * @returns {string} with valid form element\n */\nfunction filterValidFormElement(str) {\n    return (str.indexOf('addressFields') !== -1 || str.indexOf('contactInfoFields') !== -1)\n        && notEmptyString.test(str);\n}\n\n/**\n *  Parses billing fields\n *\n * @param {string} acc -\n * @param {string} str - paypal actions\n * @returns {string} decoded string\n */\nfunction parseBillingFields(acc, str) {\n    let [key, value] = str.split('=');\n    key = key.split('_');\n    key = key[key.length - 1];\n    const inputValue = decodeURIComponent(value);\n    if (key === 'phone' || key === 'email') {\n        let validInput = (key === 'phone') ?\n            regExpPhone.test(inputValue) :\n            regExpEmail.test(inputValue);\n        if (!validInput) return acc;\n    }\n    acc[key] = inputValue;\n    return acc;\n}\n\n/**\n *  Creates billing address, serializes address into form\n *\n * @returns {Object} with created billing address\n */\nfunction createBillingAddress() {\n    return $('#dwfrm_billing')\n        .serialize()\n        .split('&')\n        .filter(filterValidFormElement)\n        .reduce(parseBillingFields, {});\n}\n\n/**\n *  Creates payer object with billing address data\n *\n * @param {Object} billingAddress - billing address\n * @returns {Object} with payer data\n */\nfunction createPayerObject(billingAddress) {\n    if (billingAddress.country && billingAddress.phone) {\n        return {\n            name: {\n                given_name: billingAddress.firstName,\n                surname: billingAddress.lastName\n            },\n            email_address: billingAddress.email,\n            phone: {\n                phone_number: {\n                    national_number: billingAddress.phone\n                }\n            },\n            address: {\n                address_line_1: billingAddress.address1,\n                address_line_2: billingAddress.address2 || '',\n                admin_area_2: billingAddress.city,\n                admin_area_1: billingAddress.stateCode,\n                postal_code: billingAddress.postalCode,\n                country_code: billingAddress.country\n            }\n        };\n    }\n    return false;\n}\n\n/**\n * Check for contactInfoEmail input field and saves used payment method to hidden input\n *\n * @param {Object} data - object with data\n * @param {Object} actions - actions\n * @returns {Function} reject - if incorrect email or set PaymentMethod\n */\nfunction onClick(data, actions) {\n    let $contactInfoEmail = document.querySelector('input[name=dwfrm_billing_contactInfoFields_email]');\n    let errDiv = $contactInfoEmail.parentElement.querySelector('.invalid-feedback');\n    let errStr = 'Please enter a valid email address';\n    if ($contactInfoEmail.value.trim() !== '' &&\n        !regExpEmail.test($contactInfoEmail.value)) {\n        showCheckoutErrorHtml(errStr);\n        errDiv.innerText = errStr;\n        errDiv.style = 'display: block';\n        $contactInfoEmail.style = 'border-color: red';\n\n        return actions.reject();\n    }\n\n    errDiv.innerText = '';\n    errDiv.style = 'display: none';\n    $contactInfoEmail.style = 'border-color: rgb(206, 212, 218)';\n\n    $usedPaymentMethod.value = data.fundingSource;\n}\n/**\n *  Gets purchase units object, creates order and returns object with data\n *\n * @param {Object} _ - arg\n * @param {Object} actions - paypal actions\n * @returns {Object} with purchase units, payer and application context\n */\nfunction createOrder(_, actions) {\n    loader.show();\n    return getPurchaseUnits()\n        .then(purchase_units => {\n            let parsedPurchaseUnit = purchase_units[0];\n            if (JSON.parse(parsedPurchaseUnit.amount.value) === 0) {\n                showCheckoutErrorHtml('Order total 0 is not allowed for PayPal');\n            }\n            var payer;\n            const payerObj = createPayerObject(createBillingAddress());\n            if (payerObj) {\n                payer = payerObj;\n            }\n            const application_context = {\n                shipping_preference: parsedPurchaseUnit.shipping_preference\n            };\n            loader.hide();\n            return actions.order.create({\n                purchase_units,\n                payer,\n                application_context\n            });\n        });\n}\n\n/**\n * Sets orderID to hidden input, clears session account if it exists and irrelevant errors,\n * and clicks submit payment button\n *\n * @param {Object} data - object with data\n * @param {Object} actions - actions\n *\n */\nfunction onApprove(data, actions) {\n    loader.show();\n    if (isLpmUsed($usedPaymentMethod)) {\n        actions.order.capture()\n            .then(finishLpmOrder)\n            .then(({ redirectUrl }) => {\n                loader.hide();\n                window.location.href = redirectUrl;\n            })\n            .catch(function () {\n                loader.hide();\n            });\n        return;\n    }\n    var $orderId = document.querySelector('#paypal_orderId');\n    var $selectedAccount = document.querySelector('#sessionPaypalAccount');\n    $orderId.value = data.orderID;\n\n    if ($selectedAccount.value !== '') {\n        $selectedAccount.value = '';\n        $selectedAccount.innerText = '';\n    }\n    $selectedAccount.selected = true;\n    $selectedAccount.style.display = 'block';\n\n    var $contactInfoEmail = document.querySelector('input[name=dwfrm_billing_contactInfoFields_email]');\n    if ($contactInfoEmail.value.trim() !== '') {\n        document.querySelector('button.submit-payment').click();\n        loader.hide();\n    } else {\n        getOrderDetailsCall(data.orderID)\n            .then((orderData) => {\n                $contactInfoEmail.value = orderData.payer.email_address;\n                document.querySelector('button.submit-payment').click();\n                loader.hide();\n            })\n            .fail(() => {\n                loader.hide();\n            });\n    }\n}\n\n/**\n * Hides loader on paypal widget closing without errors\n *\n */\nfunction onCancel() {\n    loader.hide();\n}\n\n/**\n * Shows errors if paypal widget was closed with errors\n *\n */\nfunction onError() {\n    loader.hide();\n    if (document.querySelector('.error-message').style.display !== 'block') {\n        showCheckoutErrorHtml('An internal server error has occurred. \\r\\nRetry the request later.');\n    }\n}\n\n/**\n *Inits paypal button on billing checkout page\n */\nfunction initPaypalButton() {\n    loader.show();\n    window.paypal.Buttons({\n        onClick,\n        createOrder,\n        onApprove,\n        onCancel,\n        onError,\n        style: getPaypalButtonStyle(document.querySelector('.js_paypal_button_on_billing_form'))\n    }).render('.paypal-checkout-button')\n        .then(() => {\n            loader.hide();\n        });\n}\n\nexport default initPaypalButton;\n","import {\n    hideContinueButton,\n    isNewAccountSelected,\n    showContinueButton,\n    showPaypalBlock\n} from '../billingHelper';\n\nlet $billingBAbutton = document.querySelector('.paypal-checkout-ba-button');\nlet $restPaypalAccountsList = document.querySelector('#restPaypalAccountsList');\nlet $paypalAccountSave = document.querySelector('#savePaypalAccount');\nlet $paypalAccountMakeDefault = document.querySelector('#paypalAccountMakeDefault');\n\n/**\n * Sets BA id & email to form values\n * @param {string} baID - billing agreement active ID\n * @param {string} baEmail - billing agreement active email\n*/\nfunction setBAFormValues(baID, baEmail) {\n    document.getElementById('billingAgreementID').value = baID;\n    document.getElementById('billingAgreementPayerEmail').value = baEmail;\n}\n\n/** Shows PayPal BA button if it's not visible and hides continue button\n*/\nfunction showPaypalBABtn() {\n    if (!$billingBAbutton) {\n        $billingBAbutton = document.querySelector('.paypal-checkout-ba-button');\n    }\n    if ($billingBAbutton.style.display !== 'block') {\n        $billingBAbutton.style.display = 'block';\n    }\n    hideContinueButton();\n}\n\n/** Hides PayPal BA button if it's not hidden and shows continue button\n*/\nfunction hidePaypalBABtn() {\n    if (!$billingBAbutton) {\n        $billingBAbutton = document.querySelector('.paypal-checkout-ba-button');\n    }\n    if ($billingBAbutton.style.display !== 'none') {\n        $billingBAbutton.style.display = 'none';\n    }\n    showContinueButton();\n}\n\n/** Put value of checkbox makeDefault/saveAccount for backend\n*/\nfunction saveCheckboxState() {\n    var $paypal_makeDefault = document.querySelector('#paypal_makeDefault');\n    var $paypal_saveAccount = document.querySelector('#paypal_saveAccount');\n    $paypal_makeDefault.value = $paypalAccountMakeDefault.checked;\n    $paypal_saveAccount.value = $paypalAccountSave.checked;\n}\n\n/** Handle makeDefault/saveAccount checkboxes state on change\n*/\nfunction handleCheckboxChange() {\n    let $selectedAccount = $restPaypalAccountsList.querySelector('option:checked');\n    let isSessionAccountAppended = JSON.parse($selectedAccount.getAttribute('data-append'));\n    let hasDefaultPaymentMethod = JSON.parse($restPaypalAccountsList.getAttribute('data-has-default-account'));\n\n    if (isSessionAccountAppended || $selectedAccount.value === 'newaccount') {\n        if (!$paypalAccountSave.checked) {\n            $paypalAccountMakeDefault.checked = false;\n            $paypalAccountMakeDefault.disabled = true;\n        } else {\n            $paypalAccountMakeDefault.disabled = false;\n            if (!hasDefaultPaymentMethod) {\n                $paypalAccountMakeDefault.checked = true;\n            }\n        }\n    }\n    saveCheckboxState();\n}\n\n/** Show/hide/check/disable checkboxes depends on selected type of account\n*/\nfunction toggleCustomCheckbox() {\n    let $selectedAccount = $restPaypalAccountsList.querySelector('option:checked');\n    let $paypalAccountMakeDefaultContainer = document.querySelector('#paypalAccountMakeDefaultContainer');\n    let $paypalAccountSaveContainer = document.querySelector('#savePaypalAccountContainer');\n    let hasPPSavedAccount = JSON.parse($restPaypalAccountsList.getAttribute('data-has-saved-account'));\n    let hasDefaultPaymentMethod = JSON.parse($restPaypalAccountsList.getAttribute('data-has-default-account'));\n    let isSessionAccountAppended = JSON.parse($selectedAccount.getAttribute('data-append'));\n    let isBALimitReached = JSON.parse($restPaypalAccountsList.getAttribute('data-ba-limit-reached'));\n\n    if ($paypalAccountSaveContainer) {\n        if ($selectedAccount.dataset.default === 'true') {\n            $paypalAccountMakeDefaultContainer.style.display = 'none';\n            $paypalAccountMakeDefault.checked = true;\n            $paypalAccountMakeDefault.disabled = false;\n            if (hasPPSavedAccount && !hasDefaultPaymentMethod) {\n                $paypalAccountSave.checked = true;\n            } else {\n                $paypalAccountSaveContainer.style.display = 'none';\n            }\n            saveCheckboxState();\n        }\n        var isDataSetDefault = $selectedAccount.dataset.default === 'false' || $selectedAccount.dataset.default === 'null';\n        if (isDataSetDefault && !($selectedAccount.value === 'newaccount') && !isSessionAccountAppended) {\n            $paypalAccountMakeDefaultContainer.style.display = 'block';\n            $paypalAccountSaveContainer.style.display = 'none';\n            $paypalAccountSave.checked = false;\n            $paypalAccountMakeDefault.disabled = false;\n        }\n\n        if ($selectedAccount.value === 'newaccount' || isSessionAccountAppended) {\n            if (!hasPPSavedAccount) {\n                $paypalAccountMakeDefaultContainer.style.display = 'none';\n                $paypalAccountMakeDefault.checked = true;\n                $paypalAccountMakeDefault.disabled = false;\n                $paypalAccountSaveContainer.style.display = 'block';\n                if (($selectedAccount.value !== 'newaccount' && (hasDefaultPaymentMethod || isSessionAccountAppended)) ||\n                    ($selectedAccount.value === 'newaccount' && !isSessionAccountAppended)) {\n                    $paypalAccountSave.checked = true;\n                } else {\n                    $paypalAccountSave.checked = false;\n                }\n\n                saveCheckboxState();\n                return;\n            }\n            handleCheckboxChange();\n\n            if (isBALimitReached) {\n                $paypalAccountSaveContainer.style.display = 'none';\n                $paypalAccountMakeDefaultContainer.style.display = 'none';\n            } else {\n                $paypalAccountSaveContainer.style.display = 'block';\n                $paypalAccountMakeDefaultContainer.style.display = 'block';\n            }\n\n            if (hasDefaultPaymentMethod) {\n                return;\n            }\n            hasPPSavedAccount && !hasDefaultPaymentMethod ?\n                $paypalAccountMakeDefaultContainer.style.display = 'none' :\n                $paypalAccountMakeDefault.disabled = true;\n\n            $paypalAccountMakeDefault.checked = true;\n        }\n    }\n}\n\n/** Show billing agreement btn - hide paypal btn and vise versa\n*/\nfunction toggleBABtnVisibility() {\n    toggleCustomCheckbox();\n\n    if (isNewAccountSelected($restPaypalAccountsList)) {\n        showPaypalBABtn();\n        hideContinueButton();\n        return;\n    }\n    hidePaypalBABtn();\n    showPaypalBlock();\n}\n\n/** Assign billing agreement emails on change into input field\n*/\nfunction assignEmailForSavedBA() {\n    let $paypalActiveAccount = document.querySelector('#paypal_activeAccount');\n    let $contractInfoeEmail = document.querySelector('input[name=dwfrm_billing_contactInfoFields_email]');\n    let $selectedAccount = $restPaypalAccountsList.querySelector('option:checked');\n\n    if (isNewAccountSelected($restPaypalAccountsList)) {\n        $paypalActiveAccount.value = '';\n        $contractInfoeEmail.value = '';\n        document.getElementById('billingAgreementID').value = '';\n        document.getElementById('billingAgreementPayerEmail').value = '';\n    } else {\n        $paypalActiveAccount.value = $restPaypalAccountsList.querySelector('option:checked').value;\n        $contractInfoeEmail.value = $paypalActiveAccount.value;\n        setBAFormValues($selectedAccount.dataset.baId, $selectedAccount.value);\n    }\n}\n\n/**\n *  Clear element to an Existing restPaypalAccountsList Collection\n *\n */\nfunction clearSessionOption() {\n    var $option = document.querySelector('#sessionPaypalAccount');\n    $option.text = '';\n    $option.value = '';\n    $option.setAttribute('data-append', false);\n    $option.selected = false;\n    $option.style.display = 'none';\n    $option.setAttribute('data-ba-id', '');\n    document.getElementById('billingAgreementID').value = '';\n    document.getElementById('billingAgreementPayerEmail').value = '';\n\n    toggleBABtnVisibility();\n}\n\n/**\n *  Update element under restPaypalAccountsList Collection\n *\n * @param {string} email - billing agreement email\n */\nfunction updateSessionOption(email) {\n    var $option = document.querySelector('#sessionPaypalAccount');\n    $option.text = email;\n    $option.value = email;\n    $option.selected = 'selected';\n    $option.style.display = 'block';\n    $option.setAttribute('data-append', true);\n    document.querySelector('#restPaypalAccountsList').value = email;\n\n    hidePaypalBABtn();\n    showPaypalBlock();\n    showContinueButton();\n}\n\nexport {\n    toggleBABtnVisibility,\n    assignEmailForSavedBA,\n    handleCheckboxChange,\n    clearSessionOption,\n    updateSessionOption,\n    setBAFormValues\n};\n","/* eslint-disable no-useless-escape */\n/* eslint-disable no-control-regex */\nimport { getBillingAgreementToken, createBillingAgreementCall, showCheckoutErrorHtml } from '../../api';\nimport { clearSessionOption, updateSessionOption, setBAFormValues } from './billingAgreementHelper';\nimport { getPaypalButtonStyle } from '../../helper';\n\nconst loaderInstance = require('../../loader');\nconst regExprEmail = new RegExp(/(?:[a-zA-Z0-9!#$%&'*+\\/=?^_`{|}~-]+(?:\\.[a-zA-Z0-9!#$%&'*+\\/=?^_`{|}~-]+)*|(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-zA-Z0-9-]*[a-zA-Z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/);\nlet $loaderContainer = document.querySelector('.paypalLoader');\nlet loader = loaderInstance($loaderContainer);\n\n/**\n * Check for contactInfoEmail input field if not empty\n *\n * @param {Object} _ - arg\n * @param {Object} actions - paypal actions\n * @returns {Function} reject - if incorrect email\n */\nfunction onClick(_, actions) {\n    let $contactInfoEmail = document.querySelector('input[name=dwfrm_billing_contactInfoFields_email]');\n    let errDiv = $contactInfoEmail.parentElement.querySelector('.invalid-feedback');\n    let errStr = 'Please enter a valid email address';\n    if ($contactInfoEmail.value.trim() !== ''\n        && !regExprEmail.test($contactInfoEmail.value)) {\n        showCheckoutErrorHtml(errStr);\n        errDiv.innerText = errStr;\n        errDiv.style = 'display: block';\n        $contactInfoEmail.style = 'border-color: red';\n        return actions.reject();\n    }\n\n    errDiv.innerText = '';\n    errDiv.style = 'display: none';\n    $contactInfoEmail.style = 'border-color: rgb(206, 212, 218)';\n}\n\n/**\n *  Create's Billing Agreement\n *\n * @returns {string} returns JSON response that includes an data token\n */\nfunction createBillingAgreement() {\n    loader.show();\n    return getBillingAgreementToken()\n        .then((data) => data.token)\n        .fail(() => {\n            loader.hide();\n        });\n}\n\n/**\n *  Makes post call using facilitator Access Token and transfers billingToken\n *  save's billingAgreementID & billingAgreementPayerEmail to input field\n *  and triggers checkout place order stage\n *\n * @param {string} billingToken - billing agreement token\n * @returns {Object} JSON response that includes the billing agreement ID and information about the payer\n */\nfunction onApprove({ billingToken }) {\n    return createBillingAgreementCall(billingToken)\n        .then(({ id, payer }) => {\n            let payerInfo = payer.payer_info;\n            let billingAddress = payerInfo.billing_address;\n            let $restPaypalAccountsList = document.querySelector('#restPaypalAccountsList');\n            let hasDefaultPaymentMethod = JSON.parse($restPaypalAccountsList.getAttribute('data-has-default-account'));\n            let hasPPSavedAccount = JSON.parse($restPaypalAccountsList.getAttribute('data-has-saved-account'));\n            document.querySelector('#sessionPaypalAccount').setAttribute('data-ba-id', id);\n            setBAFormValues(id, payerInfo.email);\n\n            if (hasDefaultPaymentMethod && !hasPPSavedAccount) {\n                $restPaypalAccountsList.setAttribute('data-has-default-account', false);\n                $('#restPaypalAccountsList').data('data-has-default-account', false); // MFRA jquery hack\n            }\n\n            let billingAddressFields = [];\n            let contactInfoFields = [].slice.call(document.querySelectorAll('.contact-info-block input[required]'));\n\n            var keysValues = {\n                email: payerInfo.email,\n                phoneNumber: payerInfo.phone,\n                billingFirstName: payerInfo.first_name,\n                billingLastName: payerInfo.last_name,\n                billingAddressOne: billingAddress.line1,\n                billingCountry: billingAddress.country_code,\n                billingState: billingAddress.state,\n                billingAddressCity: billingAddress.city,\n                billingZipCode: billingAddress.postal_code\n            };\n            let $billinAddressBlock = document.querySelector('.billing-address-block');\n            if ($billinAddressBlock.querySelector('#billingAddressSelector option:checked').value === 'new') {\n                billingAddressFields = [].slice.call($billinAddressBlock.querySelectorAll('input[required], select[required]'));\n            }\n\n            (contactInfoFields.concat(billingAddressFields)\n                .filter(el => el.value.trim() === ''))\n                .forEach(function (el) {\n                    el.value = keysValues[el.id];\n                });\n\n            document.querySelector('button.submit-payment').click();\n            var sameAttribute = [].slice.call($restPaypalAccountsList.options)\n                    .find(el => el.value === payerInfo.email);\n\n            (sameAttribute && sameAttribute.id !== 'sessionPaypalAccount') ?\n                clearSessionOption() :\n                updateSessionOption(payerInfo.email);\n\n            loader.hide();\n        })\n        .fail(() => {\n            loader.hide();\n        });\n}\n\n/**\n * Hides loader on paypal widget closing without errors\n\n */\nfunction onCancel() {\n    loader.hide();\n}\n\n/**\n * Shows errors if paypal widget was closed with errors\n *\n */\nfunction onError() {\n    loader.hide();\n    showCheckoutErrorHtml('An internal server error has occurred. \\r\\nRetry the request later.');\n}\n\n/**\n *Inits paypal Billing Agreement button on billing checkout page\n */\nfunction initPaypalBAButton() {\n    loader.show();\n    window.paypal.Buttons({\n        onClick,\n        createBillingAgreement,\n        onApprove,\n        onCancel,\n        onError,\n        style: getPaypalButtonStyle(document.querySelector('.paypal-checkout-ba-button'))\n    }).render('.paypal-checkout-ba-button')\n        .then(() => {\n            loader.hide();\n        });\n}\n\nexport default initPaypalBAButton;\n","const defaultStyle = {\n    color: 'gold',\n    shape: 'rect',\n    layout: 'vertical',\n    label: 'paypal',\n    tagline: false\n};\n\n/**\n *  Gets paypal button styles\n * @param {Element} button - button element\n * @returns {Object} with button styles or if error appears with default styles\n */\nfunction getPaypalButtonStyle(button) {\n    try {\n        const config = button.getAttribute('data-paypal-button-config');\n        if (config) {\n            const buttonConfigs = JSON.parse(config);\n            return buttonConfigs.style;\n        }\n    } catch (error) {\n        return {\n            style: defaultStyle\n        };\n    }\n}\n\nexport {\n    getPaypalButtonStyle\n};\n","/* eslint-disable require-jsdoc */\nmodule.exports = function (containerElement) {\n    function Constructor() {\n        this.containerEl = containerElement;\n    }\n    Constructor.prototype.show = function () {\n        this.containerEl.style.display = 'block';\n    };\n    Constructor.prototype.hide = function () {\n        this.containerEl.style.display = 'none';\n    };\n    return new Constructor();\n};\n"],"sourceRoot":""}