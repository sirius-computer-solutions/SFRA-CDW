!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=112)}({112:function(t,e,i){"use strict";!function(t){function e(t){this.rawData=[],this.src=t.src,this.eventTagName=t.eventTagName,this.dateTagName=t.dateTagName,this.titleTagName=t.titleTagName,this.thumbTagName=t.thumbTagName,this.contentTagName=t.contentTagName,this.linkTagName=t.linkTagName,this.htmlEventClassName=t.htmlEventClassName,this.htmlDateClassName=t.htmlDateClassName,this.htmlTitleClassName=t.htmlTitleClassName,this.htmlContentClassName=t.htmlContentClassName,this.htmlLinkClassName=t.htmlLinkClassName,this.htmlThumbClassName=t.htmlThumbClassName,this.events=[],this.xmlDoc=1,this.allMonths="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),this.nDays=this.nMonths=this.nYears=0,this.startYear=3e4,this.endYear=0}function i(t){this.eventPositions=[],this.secondWidth=this.minuteWidth=this.hourWidth=this.dayWidth=this.monthWidth=this.yearWidth=this.width=this.eventNodeWidth=0,this.showMonths=this.showYears=!1,this.showEveryNthYear=this.showEveryNthMonth=1,this.showSeconds=this.showMinutes=this.showHours=this.showDays=!1,this.eventMargin=this.selectedEventContentsWidth=this.selectedEvent=this.yearId=this.yearPosition=this.monthPosition=this.monthId=this.step=this.nSmallScale=this.nLargeScale=0}function n(){this.selectedEventContentsWidth=0}var s,a,h,o=function(t,e,i){return t<e?t=e:t>i&&(t=i),t};e.prototype.loadXML=function(e){var i=this;t.get(i.src,(function(t){i.xmlDoc=t,e.callback()}))},e.prototype.getXMLContent=function(){for(var e=this.xmlDoc.getElementsByTagName(this.eventTagName),i=0;i<e.length;i++){var n='<a href="'+t(e[i]).find(this.linkTagName).find("a").attr("href")+'">'+t(e[i]).find(this.linkTagName).find("a").text()+"</a>";this.rawData[i]={date:t(e[i]).find(this.dateTagName).text(),title:t(e[i]).find(this.titleTagName).text(),thumb:t(e[i]).find(this.thumbTagName).text(),content:t(e[i]).find(this.contentTagName).text(),link:n}}},e.prototype.getHTMLContent=function(){for(var e=t("."+this.htmlEventClassName),i=0;i<e.length;i++)this.rawData[i]={date:t(e[i]).find("."+this.htmlDateClassName).html(),title:t(e[i]).find("."+this.htmlTitleClassName).html(),thumb:"",content:t(e[i]).find("."+this.htmlContentClassName).html(),link:t(e[i]).find("."+this.htmlLinkClassName).html()},0!=t(e[i]).find("."+this.htmlThumbClassName).length&&(this.rawData[i].thumb=t(e[i]).find("."+this.htmlThumbClassName).html())},e.prototype.parseRawData=function(){for(var t,e,i,n=0;n<this.rawData.length;n++){if(-1==this.rawData[n].date.search("BC")){t=(e=this.rawData[n].date.split("."))[0],i=e[1],e=parseInt(e[2]);var s=0,a=(s=0==parseInt(t[0])?parseInt(t[1]):parseInt(t),0);a=0==parseInt(i[0])?parseInt(i[1]):parseInt(i);t=t+"."+i+"."+e}else t=this.rawData[n].date,e=parseInt("-"+this.rawData[n].date.replace(" ","").replace("BC",""));100<(i=this.rawData[n].title).length&&(i=i.slice(0,100),i+="...");var h=!1;if(""!=this.rawData[n].thumb){h=!0;var o='<img src="'+this.rawData[n].thumb+'">'}var r=this.rawData[n].content;400<r.length&&(r=r.slice(0,400),r+="..."),this.events[n]={id:n,datestring:t,date:s,year:e,month:a,title:i,content:r,link:this.rawData[n].link,hasThumb:h,thumb:o}}for(n=0;n<this.events.length;n++)parseInt(this.events[n].year)>this.endYear&&(this.endYear=parseInt(this.events[n].year));for(n=0;n<this.events.length;n++)parseInt(this.events[n].year)<this.startYear&&(this.startYear=parseInt(this.events[n].year));this.nYears=this.endYear-this.startYear+1,this.nMonths=Math.ceil((this.endDate-this.startDate)/this.months),this.nDays=Math.ceil((this.endDate-this.startDate)/this.days)},e.prototype.parseXML=function(){for(var e,i,n,s=this.xmlDoc.getElementsByTagName(this.eventTagName),a=0;a<s.length;a++){e=(i=t(s[a]).find(this.dateTagName).text().split("."))[0],n=i[1],i=parseInt(i[2]);var h=0==parseInt(e[0])?parseInt(e[1]):parseInt(e);e=0,e=0==parseInt(n[0])?parseInt(n[1]):parseInt(n),30<(n=t(s[a]).find(this.titleTagName).text()).length&&(n=n.slice(0,30),n+="...");var o=!1;if(0!=t(s[a]).find(this.thumbTagName).length){o=!0;var r='<img src="'+t(s[a]).find(this.thumbTagName).text()+'">'}var l=t(s[a]).find(this.contentTagName).text();400<l.length&&(l=l.slice(0,400),l+="..."),this.events[a]={id:a,date:h,year:i,month:e,title:n,content:l,link:t(s[a]).find(this.linkTagName).find("a"),hasThumb:o,thumb:r}}for(a=0;a<this.events.length;a++)parseInt(this.events[a].year)>this.endYear&&(this.endYear=parseInt(this.events[a].year));for(a=0;a<this.events.length;a++)parseInt(this.events[a].year)<this.startYear&&(this.startYear=parseInt(this.events[a].year));this.nYears=this.endYear-this.startYear+1,this.nMonths=Math.ceil((this.endDate-this.startDate)/this.months),this.nDays=Math.ceil((this.endDate-this.startDate)/this.days)},e.prototype.parseHTML=function(){for(var e,i,n,s=t(".timeline-event"),a=0;a<s.length;a++){e=(i=t(s[a]).find("."+this.htmlDateClassName).html().split("."))[0],n=i[1],i=parseInt(i[2]);var h=0==parseInt(e[0])?parseInt(e[1]):parseInt(e);e=0,e=0==parseInt(n[0])?parseInt(n[1]):parseInt(n),30<(n=t(s[a]).find("."+this.htmlTitleClassName).html()).length&&(n=n.slice(0,30),n+="...");var o=!1;if(0!=t(s[a]).find("."+this.htmlThumbClassName).length){o=!0;var r='<img src="'+t(s[a]).find("."+this.htmlThumbClassName).html()+'">'}var l=t(s[a]).find("."+this.htmlContentClassName).html();400<l.length&&(l=l.slice(0,400),l+="..."),this.events[a]={id:a,date:h,year:i,month:e,title:n,content:l,link:t(s[a]).find("."+this.htmlLinkClassName).find("a"),hasThumb:o,thumb:r}}for(a=0;a<this.events.length;a++)parseInt(this.events[a].year)>this.endYear&&(this.endYear=parseInt(this.events[a].year));for(a=0;a<this.events.length;a++)parseInt(this.events[a].year)<this.startYear&&(this.startYear=parseInt(this.events[a].year));this.nYears=this.endYear-this.startYear+1,this.nMonths=Math.ceil((this.endDate-this.startDate)/this.months),this.nDays=Math.ceil((this.endDate-this.startDate)/this.days)},i.prototype.init=function(e){this.target=e.target,this.width=this.target.outerWidth(),this.yearWidth=this.width/s.nYears,this.monthWidth=this.yearWidth/12,this.dayWidth=this.monthWidth/30,"html"===e.mode&&t(".timeline-html-wrap").hide(),this.target.after().append('<div class="timeline-event-node"></div>'),this.eventNodeWidth=t(".timeline-event-node").first().outerWidth(),t(".timeline-event-node").remove(),this.showMonths=!(8>=this.monthWidth),this.showEveryNthMonth=Math.round(this.width/this.monthWidth/12),this.showEveryNthMonth-=this.showEveryNthMonth%2,1==s.nYears&&(this.showEveryNthMonth=1),this.showYears=!(this.yearWidth>this.width),this.showEveryNthYear=Math.round(this.width/this.yearWidth/12),e=this.showEveryNthYear+"";for(var i=1,n=0;n<e.length-1;n++)i+="0";this.showEveryNthYear=Math.round(this.showEveryNthYear/parseInt(i))*parseInt(i),this.showEveryNthYear=1>this.showEveryNthYear?1:this.showEveryNthYear,this.nLargeScale=s.nYears,this.nSmallScale=s.nMonths,this.step=this.monthWidth/30},i.prototype.drawEvents=function(){var t;t='<div class="timeline-wrap">\t<div class="timeline-events">\t<div class="timeline-years timeline-large-scale"></div>',t+='\t<div class="timeline-months timeline-small-scale"></div>';for(var e=0;e<s.events.length;e++)t+='\t\t<div class="timeline-event timeline-bottom" id="timeline-event-'+s.events[e].id+'">',t+='\t\t\t<div class="timeline-event-node" id="timeline-event-node-'+s.events[e].id+'"></div>',t+='\t\t\t<div class="timeline-event-arrow"></div>',t+='\t\t\t<div class="timeline-event-contents">',0!=s.events[e].title&&(t+='\t\t\t<div class="timeline-event-title"><span>'+s.events[e].datestring.replace(/00\./g,"")+"</span>"+s.events[e].title+"</div>"),0!=s.events[e].content&&(t+='\t\t\t<div class="timeline-event-content">',s.events[e].hasThumb&&(t+=s.events[e].thumb),t+=s.events[e].content+"</div>"),0!=s.events[e].link&&(t+='\t\t\t<div class="timeline-event-link">'+s.events[e].link+"</div>"),t+="\t\t\t</div>",t+="\t\t</div>";t+="\t</div>",t+="</div>",this.target.html(t)},i.prototype.setData=function(){for(var e=0,i=0,n=0;n<s.events.length;n++)(i=(e=t("#timeline-event-"+s.events[n].id)).find(".timeline-event-contents")).show(),e.data({offset:i.offset().left,smallWidth:i.width(),margin:parseInt(e.find(".timeline-event-contents").css("margin-left").replace("px",""))}),i.hide()},i.prototype.addDates=function(){if(this.showYears)for(var t=0;t<s.nYears+1;t++){if(t<s.nYears)for(var e=0;12>e;e++)this.addMonth();this.addYear()}},i.prototype.addMonth=function(){0!=this.monthId%12&&this.showMonths&&(0==this.monthId%this.showEveryNthMonth?t(".timeline-months").append('<div class="timeline-month timeline-dateblock" id="timeline-month-'+this.monthId+'">'+s.allMonths[this.monthId%12]+"</div>"):t(".timeline-months").append('<div class="timeline-month timeline-dateblock" id="timeline-month-'+this.monthId+'"></div>'),t("#timeline-month-"+this.monthId).css({left:o(this.monthPosition,0,this.width)})),this.monthPosition+=this.monthWidth,this.monthId++},i.prototype.addYear=function(){if(this.showYears&&0==this.yearId%this.showEveryNthYear){var e=[];0>(e=s.startYear+this.yearId+"")&&(e=e.replace("-","")+" BC"),t(".timeline-years").append('<div class="timeline-year timeline-dateblock" id="timeline-year-'+this.yearId+'">'+e+"</div>"),t("#timeline-year-"+this.yearId).css({left:o(this.yearPosition,0,this.width-1)})}this.yearPosition+=this.yearWidth,this.yearId++},i.prototype.positionEvents=function(){for(var e=0;e<s.events.length;e++)s.events[e].position=a.getPosition(e);for(e=0;e<s.events.length;e++);for(s.events.sort((function(t,e){return t.position-e.position})),e=1;e<s.events.length;e++)s.events[e].position<=s.events[e-1].position&&(s.events[e].position=s.events[e-1].position),Math.abs(s.events[e].position-s.events[e-1].position)<a.eventNodeWidth&&(Math.abs(s.events[e].position-s.events[e-1].position),s.events[e].position=s.events[e-1].position+a.eventNodeWidth/1.5);if(s.events[s.events.length-1].position>root.width)for(s.events[s.events.length-1].position=root.width,e=s.events.length-1;0<e;e--)s.events[e-1].position>=s.events[e].position&&(s.events[e-1].position=s.events[e].position),Math.abs(s.events[e].position-s.events[e-1].position)<a.eventNodeWidth&&(Math.abs(s.events[e].position-s.events[e-1].position),s.events[e-1].position-=a.eventNodeWidth/1.5),s.events[e].position-=a.eventNodeWidth/2;for(root.drawEvents(),root.setData(),e=0;e<s.events.length;e++)t("#timeline-event-"+s.events[e].id).css({left:s.events[e].position,"z-index":e})},i.prototype.getPosition=function(t){root=this;var e=root.monthWidth*(s.events[t].month-1)+root.yearWidth*(s.events[t].year-s.startYear)+root.dayWidth*(s.events[t].date-1)-a.eventNodeWidth/2-1;return root.eventPositions[t]=e},i.prototype.showEvent=function(e){var i=(e=t("#"+e)).find(".timeline-event-contents");this.aboveTimeline(e)&&e.addClass("timeline-above"),e.addClass("timeline-hover").find(".timeline-event-contents").fadeIn(200),e.find(".timeline-event-arrow").fadeIn(200),e.data({offset:i.offset().left,showed:!0}),this.needMargin(e)&&this.correctMargin(e)},i.prototype.hideEvent=function(e){var i=t("#"+e);i.removeClass("timeline-hover").find(".timeline-event-contents").fadeOut(200,(function(){t(this).closest(".timeline-above").removeClass("timeline-above"),i.find(".timeline-event-contents").css({"margin-left":i.data("margin")})})),i.removeClass("timeline-hover").find(".timeline-event-arrow").fadeOut(200),i.data({showed:!1})},i.prototype.selectEvent=function(e){e.find(".timeline-event-contents"),e.removeClass("timeline-above").addClass("timeline-selected").removeClass("timeline-hover"),this.selectedEvent=e,e.data("showed")||this.showEvent(e.attr("id"));var i=this.needMargin(e,400)?-(e.data("offset")+400-(t(".timeline-wrap").offset().left+t(".timeline-wrap").outerWidth()))+e.data("margin"):e.data("margin");e.find(".timeline-event-contents").fadeIn(200).animate({"margin-left":i},100,(function(){e.find(".timeline-event-content").slideDown(200),e.find(".timeline-event-link").fadeIn(200)}))},i.prototype.deselectEvent=function(){var e=t(".timeline-wrap").find(".timeline-selected");this.hideEvent(e.attr("id")),e.removeClass("timeline-selected"),e.find(".timeline-event-content").slideUp(200,(function(){e.find(".timeline-event-contents").css({"margin-left":e.data("margin")})})),e.find(".timeline-event-link").fadeOut(200),this.selectedEvent=0},i.prototype.aboveTimeline=function(t){return 0!=this.selectedEvent&&!t.hasClass("timeline-selected")},i.prototype.needMargin=function(e,i){return i=void 0===i?e.find(".timeline-event-contents").outerWidth():400,e.data("offset")+i>t(".timeline-wrap").offset().left+t(".timeline-wrap").outerWidth()},i.prototype.correctMargin=function(e,i,n){i=void 0===i?e.find(".timeline-event-contents").outerWidth():400,i=e.data("offset")+i-(t(".timeline-wrap").offset().left+t(".timeline-wrap").outerWidth()),n?e.find(".timeline-event-contents").animate({"margin-left":-i+e.data("margin")},100):e.find(".timeline-event-contents").css({"margin-left":-i+e.data("margin")})},n.prototype.setDOMEvents=function(){var e=this;t(".timeline-event-node").on("click",(function(){0==a.selectedEvent?a.selectEvent(t(this).parent()):t(this).parent().hasClass("timeline-selected")?a.deselectEvent(t(this).parent()):(a.deselectEvent(t(".timeline-selected")),a.selectEvent(t(this).parent()))})),t(".timeline-event-node").on("mouseover",(function(){0==t(".timeline-selected").length&&a.hideEvent(t(".timeline-hover").attr("id")),t(this).closest(".timeline-event").hasClass("timeline-hover")||a.showEvent(t(this).closest(".timeline-event").attr("id"))})),t(".timeline-event-node").on("mouseout",(function(){t(this).closest(".timeline-event").hasClass("timeline-selected")||a.hideEvent(t(this).closest(".timeline-event").attr("id"))})),t(document).on("click",(function(i){0!=e.selectedEvent&&0==t(i.target).closest(".timeline-wrap").length&&a.deselectEvent()}))},t.fn.extend({timelinexml:function(o){var r=t.extend({src:"",showLatest:!1,selectLatest:!1,eventTagName:"event",dateTagName:"date",titleTagName:"title",thumbTagName:"thumb",contentTagName:"content",linkTagName:"link",mode:"xml",htmlEventClassName:"timeline-event",htmlDateClassName:"timeline-date",htmlTitleClassName:"timeline-title",htmlContentClassName:"timeline-content",htmlLinkClassName:"timeline-link",htmlThumbClassName:"timeline-thumb"},o);return s=new e(r),a=new i,h=new n,this.each((function(){var e=t(this);0==r.src.length?(r.mode="html",s.getHTMLContent(),s.parseRawData(),a.init({target:e,mode:"html"}),a.positionEvents(),a.addDates(),h.setDOMEvents(),(r.showLatest||r.selectLatest)&&(a.showEvent("timeline-event-0"),r.selectLatest&&setTimeout((function(){a.selectEvent(t("#timeline-event-0"))}),500))):s.loadXML({callback:function(){s.getXMLContent(),s.parseRawData(),a.init({target:e}),a.positionEvents(),a.addDates(),h.setDOMEvents(),(r.showLatest||r.selectLatest)&&(a.showEvent("timeline-event-0"),r.selectLatest&&setTimeout((function(){a.selectEvent(t("#timeline-event-0"))}),500))}})}))}})}(jQuery)}});